"use strict";statracker.controller("HomeController",[function(){}]),angular.module("statracker").run(["$templateCache",function(t){t.put("src/tabs.html","<ion-view><ion-tabs class=tabs-stable><ion-tab title=Rounds icon=ion-flag ui-sref=tab.rounds><ion-nav-view name=rounds></ion-nav-view></ion-tab><ion-tab title=Statistics icon=ion-stats-bars ui-sref=tab.stats><ion-nav-view name=stats></ion-nav-view></ion-tab><ion-tab title=Settings icon=ion-gear-b ui-sref=tab.settings><ion-nav-view name=settings></ion-nav-view></ion-tab></ion-tabs></ion-view>"),t.put("src/account/login-page.html",'<ion-view view-title=Login ng-controller="LoginController as ctrl"><ion-content><div class=row><div class=col><form ng-submit=ctrl.doLogin()><div class=list><label class="item item-input"><span class=input-label>Email</span> <input type=email ng-model=ctrl.credentials.email></label> <label class="item item-input"><span class=input-label>Password</span> <input type=password ng-model=ctrl.credentials.password></label> <label class=item><button class="button button-block button-positive" type=submit ng-disabled=!ctrl.canLogin()>Log in</button></label></div></form></div></div><div class=row ng-show=ctrl.credentials.hasError><div class=col><p>{{ctrl.credentials.error}}</p></div></div><div class=row><div class=col><p>New to StaTracker?</p></div><div class=col><button class="button button-calm" ui-sref=register>Register</button></div></div></ion-content></ion-view>'),t.put("src/account/my-bag.html",'<ion-view view-title="My Bag"><ion-nav-buttons side=primary><button class="button button-small button-clear icon icon-left ion-ios7-arrow-back" ui-sref=^.settings>Back</button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-clear">Edit</button></ion-nav-buttons><ion-content><p>List of clubs for the logged in user, with a way to add, edit, remove clubs from the list. Each club also has editable attributes.</p></ion-content></ion-view>'),t.put("src/account/preferences.html",'<ion-view view-title=Preferences><ion-nav-buttons side=primary><button class="button button-small button-clear icon icon-left ion-ios7-arrow-back" ui-sref=^.settings>Back</button></ion-nav-buttons><ion-content><p>Preference settings governing app behavior</p></ion-content></ion-view>'),t.put("src/account/register.html",'<ion-view view-title=Register><ion-nav-buttons side=primary><button class="button button-small button-clear icon icon-left ion-ios7-arrow-back" ui-sref=login>Back</button></ion-nav-buttons><ion-content><div class=row><div class=col><form ng-submit=doRegister() novalidate><div class=list><label class="item item-input"><span class=input-label>Email</span> <input type=email name=email ng-model=registration.email></label> <label class="item item-input"><span class=input-label>Password</span> <input type=password name=password ng-model=registration.password></label> <label class="item item-input"><span class=input-label>Confirm Password</span> <input type=password name=confirm ng-model=registration.confirmPassword></label> <label class=item><button class="button button-block button-positive" type=submit>Register</button></label></div><div class=row ng-show=registration.hasError><div class=col><p>{{ registration.error }}</p></div></div></form></div></div></ion-content></ion-view>'),t.put("src/account/settings.html",'<ion-view view-title=Settings><ion-content><button class="button button-block" ui-sref=^.my-bag>My Clubs</button> <button class="button button-block" ui-sref=^.preferences>Preferences</button><p>You are logged in as {{user.name}}</p><button class="button button-block" ng-click=doLogout()>Log Out</button></ion-content></ion-view>'),t.put("src/rounds/approach-summary.html",'<ion-view view-title="Approach Shots"><ion-content scroll=false has-bouncing=false nav-prev=^.teeball-summary><p>Round id: {{ round.id }}</p><p>The green SVG image with all approach shots charted.</p></ion-content></ion-view>'),t.put("src/rounds/approach.html",'<ion-view view-title="Approach Shot"><ion-nav-buttons side=primary><button class="button button-small button-clear" ng-click=gotoSummary()>Back</button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small" ng-click=openHoleNav()>{{hole.number}}</button></ion-nav-buttons><ion-content scroll=false has-bouncing=false nav-next=^.round-detail-shortgame nav-prev=^.round-detail-teeball><p>Round id: {{ round.id }}</p><p>Custom SVG control to capture the approach shot for hole {{hole.number}}</p></ion-content></ion-view>'),t.put("src/rounds/create-page.html",'<ion-view view-title="New Round" ng-controller="CreateRoundController as ctrl"><ion-nav-buttons side=primary><button class="button button-small button-clear icon icon-left ion-ios7-arrow-back" ui-sref=^.rounds>Back</button></ion-nav-buttons><ion-content><div class=row><div class=col><form ng-submit=ctrl.startRound()><div class=list><label class="item item-input"><span class=input-label>Date</span> <input type=date ng-model=ctrl.round.date></label> <label class="item item-input"><span class=input-label>Course</span><my-courses ng-model=ctrl.round.course></my-courses></label> <label class="item item-input"><span class=input-label>Holes</span> <input type=tel ng-model=ctrl.round.holes></label> <label class=item><button class="button button-block button-positive" type=submit ng-disabled=!ctrl.canStart()>Start</button></label></div></form></div></div><div class=row ng-show=ctrl.round.hasError><div class=col><p>{{ctrl.round.error}}</p></div></div></ion-content></ion-view>'),t.put("src/rounds/goto.html","<ion-popover-view><ion-pane><h1>Go To Specific Hole</h1></ion-pane></ion-popover-view>"),t.put("src/rounds/hole.html",'<ion-view view-title="Round Detail"><ion-tabs class="tabs-top tabs-stable"><ion-tab title="Tee Ball" ui-sref=tab.round-detail.teeball><ion-nav-view name=teeball></ion-nav-view></ion-tab><ion-tab title=Approach ui-sref=tab.round-detail.approach><ion-nav-view name=approach></ion-nav-view></ion-tab><ion-tab title="Short Game" ui-sref=tab.round-detail.shortgame><ion-nav-view name=shortgame></ion-nav-view></ion-tab></ion-tabs></ion-view>'),t.put("src/rounds/list-page.html",'<ion-view view-title="My Rounds" ng-controller="ListRoundsController as ctrl"><ion-nav-buttons side=secondary><button class="button button-small button-clear icon ion-plus" ui-sref=^.new-round></button></ion-nav-buttons><ion-content><div><p>graph of the last N rounds</p></div><div><p>average score for those last N rounds</p></div><ion-list><ion-item ng-repeat="round in ctrl.rounds" ui-sref="tab.round-summary({id: {{round.key}}})">{{round.date}} - ({{round.score}}): {{round.course.description}}</ion-item></ion-list></ion-content></ion-view>'),t.put("src/rounds/round-summary.html",'<ion-view view-title="Round Overview"><ion-nav-buttons side=primary><button class="button button-small button-clear" ui-sref=^.rounds>Back</button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small button-clear" ng-click=gotoDetails()>Details</button></ion-nav-buttons><ion-content scroll=false has-bouncing=false nav-next=^.teeball-summary><p>Round id: {{ round.id }}</p><p>Controls to enter the basic round statistics (fairways hit, gir, putts, etc.)</p></ion-content></ion-view>'),t.put("src/rounds/shortgame.html",'<ion-view view-title="Short Game"><ion-nav-buttons side=primary><button class="button button-small button-clear" ng-click=gotoSummary()>Back</button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small" ng-click=openHoleNav()>{{hole.number}}</button></ion-nav-buttons><ion-content scroll=false has-bouncing=false nav-next=^.round-detail-teeball nav-prev=^.round-detail-approach><p>Round id: {{ round.id }}</p><p>Controls to capture short game information for hole {{hole.number}}</p></ion-content></ion-view>'),t.put("src/rounds/teeball-summary.html",'<ion-view view-title="Tee Shots"><ion-content scroll=false has-bouncing=false nav-next=^.approach-summary nav-prev=^.round-summary><p>Round id: {{ round.id }}</p><p>The fairway SVG image with all tee shots charted.</p></ion-content></ion-view>'),t.put("src/rounds/teeball.html",'<ion-view view-title="Tee Shot"><ion-nav-buttons side=primary><button class="button button-small button-clear" ng-click=gotoSummary()>Back</button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small" ng-click=openHoleNav()>{{hole.number}}</button></ion-nav-buttons><ion-content scroll=false has-bouncing=false nav-next=^.round-detail-approach nav-prev=^.round-detail-shortgame><p>Round id: {{ round.id }}</p><p>Custom SVG control to capture tee shot for hole {{hole.number}}</p></ion-content></ion-view>'),t.put("src/stats/approach.html",'<ion-view view-title="Approach Shots"><ion-nav-buttons side=primary><button class="button button-small button-clear icon ion-navicon" ng-click=openMenu()></button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small button-clear icon ion-funnel" ng-click=openFilter()></button></ion-nav-buttons><ion-content has-bouncing=false nav-prev=^.teeball nav-next=^.shortgame><p>Approach-only numerical statistics, trends, and heat map for the current period.</p></ion-content></ion-view>'),t.put("src/stats/filter.html","<ion-popover-view><ion-content><h1>Filter Settings</h1></ion-content></ion-popover-view>"),t.put("src/stats/overall.html",'<ion-view view-title=Overall><ion-nav-buttons side=primary><button class="button button-small button-clear icon ion-navicon" ng-click=openMenu()></button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small button-clear icon ion-funnel" ng-click=openFilter()></button></ion-nav-buttons><ion-content has-bouncing=false nav-prev=^.shortgame nav-next=^.teeball><p>Overall statistics and trends for the current period.</p></ion-content></ion-view>'),t.put("src/stats/shortgame.html",'<ion-view view-title="Short Game"><ion-nav-buttons side=primary><button class="button button-small button-clear icon ion-navicon" ng-click=openMenu()></button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small button-clear icon ion-funnel" ng-click=openFilter()></button></ion-nav-buttons><ion-content has-bouncing=false nav-prev=^.approach nav-next=^.overall><p>Short-game-only numerical statistics and trends for the current period.</p></ion-content></ion-view>'),t.put("src/stats/stats.html","<ion-view><ion-nav-view name=stats-detail></ion-nav-view></ion-view>"),t.put("src/stats/teeball.html",'<ion-view view-title="Tee Shots"><ion-nav-buttons side=primary><button class="button button-small button-clear icon ion-navicon" ng-click=openMenu()></button></ion-nav-buttons><ion-nav-buttons side=secondary><button class="button button-small button-clear icon ion-funnel" ng-click=openFilter()></button></ion-nav-buttons><ion-content has-bouncing=false nav-prev=^.overall nav-next=^.approach><p>Teeball-only numerical statistics, trends, and heat map for the current period.</p></ion-content></ion-view>')}]),statracker.controller("AccountController",["$scope","$state","accountService",function(t,e,o){t.user=o.user(),t.doLogout=function(){o.logout(),e.go("login")}}]),statracker.factory("accountService",["$http","localStore","jwtHelper","apiUrl","clientId",function(t,e,o,n,r){var s={authenticated:!1,id:"",name:"",email:""},a=function(a){var l="grant_type=password&username="+a.email+"&password="+a.password+"&client_id="+r;return t({url:n+"token",method:"POST",data:l,skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){var n=o.decodeToken(t.access_token);s.authenticated=!0,s.id=n.nameid,s.name=n.sub,s.email=n.sub,e.set("user",s),e.set("access_token",t.access_token),e.set("refresh_token",t.refresh_token)}).error(function(){i()})},i=function(){return s.authenticated&&t.post(n+"api/account/logout"),e.remove("access_token"),e.remove("refresh_token"),e.remove("user"),s={}},l=function(e){return i(),t({url:n+"api/account/register",method:"POST",data:e,skipAuthorization:!0})},u=function(){var t=e.get("user");return void 0===t||null===t?void 0:t},c=function(){var o=e.get("refresh_token"),s="grant_type=refresh_token&refresh_token="+o+"&client_id="+r;return o?t({url:n+"token",method:"POST",skipAuthorization:!0,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){e.set("access_token",t.access_token),e.set("refresh_token",t.refresh_token)}).error(function(){i()}):void 0};return{login:a,logout:i,register:l,user:u,refresh:c}}]),statracker.controller("LoginController",["$state","accountService",function(t,e){var o=this;o.credentials={email:"",password:"",hasError:!1,error:""},o.canLogin=function(){return o.credentials.email&&o.credentials.email.length>0&&o.credentials.password&&o.credentials.password.length>0},this.doLogin=function(){o.credentials.hasError=!1,o.credentials.error="",e.login(this.credentials).success(function(){t.go("tab.rounds")}).error(function(t){o.credentials.hasError=!0,o.credentials.error=null===t?"Cannot reach the StaTracker authorization server":t.error_description})}}]),statracker.directive("login",[function(){return{scope:{},templateUrl:"js/account/login.html",replace:!0,bindToController:!0,controller:"loginController",controllerAs:"ctrl"}}]).controller("loginController",["$state","accountService",function(t,e){this.credentials={email:"",password:"",hasError:!1,error:""},this.doLogin=function(){this.credentials.hasError=!1,this.credentials.error="",e.login(this.credentials).success(function(){t.go("tab.rounds")}).error(function(t){this.credentials.hasError=!0,this.credentials.error=t.error_description})}}]),statracker.controller("MyBagController",[function(){}]),statracker.directive("myCourses",["$ionicTemplateLoader","$ionicBackdrop","$timeout","$rootScope","$document","userData",function(t,e,o,n,r,s){return{require:"?ngModel",restrict:"E",template:'<input type="text" class="my-courses-control" autocomplete="off">',replace:!0,link:function(n,a,i,l){n.courses=s.courses;var u,c=['<div class="my-courses-container">','<div class="bar bar-header item-input-inset">','<label class="item-input-wrapper">','<i class="icon ion-ios7-search placeholder-icon"></i>','<input type="search" ng-model="searchQuery" placeholder="Enter a course description">',"</label>",'<button class="button button-clear">Save</button>',"</div>",'<ion-content class="has-header">',"<ion-list>",'<ion-item ng-repeat="course in courses" type="item-text-wrap" ng-click="selectCourse(course)">',"{{course.courseDescription}}","</ion-item>","</ion-list>","</ion-content>","</div>"].join("");t.compile({template:c,scope:n,appendTo:r[0].body}).then(function(t){var r=angular.element(t.element.find("input"));n.selectCourse=function(o){l.$setViewValue(o),l.$render(),t.element.css("display","none"),e.release()},n.$watch("searchQuery",function(t){u&&o.cancel(u),u=o(function(){t&&n.$apply(function(){s.courses&&s.courses.length>0&&(n.courses=s.courses.filter(function(e){return""===t||e.courseDescription.startsWith(t)?e:void 0}))})},100)});var i=function(o){o.preventDefault(),o.stopPropagation(),e.retain(),t.element.css("display","block"),r[0].focus(),setTimeout(function(){r[0].focus()},0)},c=function(){var o={key:0,courseDescription:r[0].value};l.$setViewValue(o),l.$render(),n.searchQuery="",e.release(),t.element.css("display","none"),n.$emit("new-course",r[0].value)};a.bind("click",i),a.bind("touchend",i),t.element.find("button").bind("click",c)}),i.placeholder&&a.attr("placeholder",i.placeholder),l.$formatters.unshift(function(t){return t?t:""}),l.$parsers.unshift(function(t){return t}),l.$render=function(){a.val(l.$viewValue?l.$viewValue.courseDescription||"":"")}}}}]),statracker.controller("PreferencesController",[function(){}]),statracker.controller("RegisterController",["$scope","$state","accountService",function(t,e,o){t.registration={email:"",password:"",confirmPassword:"",hasError:!1,error:""},t.doRegister=function(){t.registration.hasError=!1,t.registration.error="",t.validate()&&o.register(t.registration).success(function(){o.login(t.registration).then(function(){e.go("tab.rounds")})}).error(function(e){t.registration.hasError=!0,t.registration.error=e.error_description?e.error_description:e.modelState?e.modelState:e})},t.validate=function(){return""===t.registration.email?(t.registration.hasError=!0,t.registration.error="An email address is required",!1):""===t.registration.password?(t.registration.hasError=!0,t.registration.error="A password is required",!1):t.registration.password!==t.registration.confirmPassword?(t.registration.hasError=!0,t.registration.error="The passwords do not match",!1):!0}}]),statracker.factory("userData",["$http","$q","apiUrl",function(t,e,o){var n=[],r=[],s=function(){var s=e.defer(),a=e.defer();return n&&n.length>0?s.resolve(n):t.get(o+"/api/users/clubs").then(function(t){t.data&&(n=t.data),s.resolve(n)}),r&&r.length>0?a.resolve(r):t.get(o+"/api/users/courses").then(function(t){t.data&&(r=t.data),a.resolve(r)}),e.all([s,a])},a=function(n){var s=e.defer(),a=r&&r.find(function(t){return t.courseDescription.toLowerCase()===n.toLowerCase()});return a?s.resolve(void 0):t.post(o+"/api/users/courses",{courseDescription:n}).then(function(t){r.push(t.data),s.resolve(t.data)}),s.promise};return{get clubs(){return n},get courses(){return r},loadUserData:s,addCourse:a}}]),statracker.config(["$httpProvider","jwtInterceptorProvider",function(t,e){e.tokenGetter=["localStore","jwtHelper","accountService",function(t,e,o){var n=t.get("access_token"),r=t.get("refresh_token");return n&&r?e.isTokenExpired(n)?o.refresh().then(function(e){var o=e.data.access_token;return t.set("access_token",o),o}):n:null}],t.interceptors.push("jwtInterceptor")}]),statracker.run(["$rootScope","$state","accountService",function(t,e,o){t.$on("$stateChangeStart",function(t,n){var r=o.user(),s=n&&n.data&&n.data.secure;!s||void 0!==r&&r.authenticated||(t.preventDefault(),e.go("login"))})}]),statracker.config(["$httpProvider",function(t){t.interceptors.push(function(t,e){return{request:function(e){return t.$broadcast("loading:show"),e},response:function(e){return t.$broadcast("loading:hide"),e},responseError:function(o){return t.$broadcast("loading:hide"),e.reject(o)}}})}]),statracker.run(["$rootScope","$ionicLoading",function(t,e){t.$on("loading:show",function(){e.show({template:"Loading...",noBackdrop:!0})}),t.$on("loading:hide",function(){e.hide()})}]),statracker.config(["$ionicConfigProvider",function(t){t.tabs.position("bottom"),t.backButton.previousTitleText(!1),t.backButton.icon("ion-ios7-arrow-left")}]).run(function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,o=Object(this),n=o.length>>>0,r=arguments[1],s=0;n>s;s++)if(e=o[s],t.call(r,e,s,o))return e;return void 0}),statracker.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("login",{url:"/login",templateUrl:"src/account/login-page.html"}).state("register",{url:"/register",templateUrl:"src/account/register.html"}).state("tab",{url:"/tab","abstract":!0,templateUrl:"src/tabs.html",data:{secure:!0}}).state("tab.settings",{url:"/settings",views:{settings:{templateUrl:"src/account/settings.html",controller:"AccountController",resolve:{userData:["userData",function(t){return t.loadUserData()}]}}}}).state("tab.preferences",{url:"/preferences",views:{settings:{templateUrl:"src/account/preferences.html",controller:"PreferencesController"}}}).state("tab.my-bag",{url:"/my-bag",views:{settings:{templateUrl:"src/account/my-bag.html",controller:"MyBagController"}}}).state("tab.rounds",{url:"/rounds",views:{rounds:{templateUrl:"src/rounds/list-page.html",resolve:{userData:["userData",function(t){return t.loadUserData()}]}}}}).state("tab.new-round",{url:"/new-round",views:{rounds:{templateUrl:"src/rounds/create-page.html"}}}).state("tab.round-summary",{url:"/round-summary",params:{id:0},views:{rounds:{templateUrl:"src/rounds/round-summary.html",controller:"RoundController"}}}).state("tab.teeball-summary",{url:"/teeball-summary",params:{id:0},views:{rounds:{templateUrl:"src/rounds/teeball-summary.html",controller:"RoundController"}}}).state("tab.approach-summary",{url:"/approach-summary",params:{id:0},views:{rounds:{templateUrl:"src/rounds/approach-summary.html",controller:"RoundController"}}}).state("tab.round-detail-teeball",{url:"/round-detail-teeball",params:{id:0,hole:0},views:{rounds:{templateUrl:"src/rounds/teeball.html",controller:"HoleController"}}}).state("tab.round-detail-approach",{url:"/round-detail-approach",params:{id:0,hole:0},views:{rounds:{templateUrl:"src/rounds/approach.html",controller:"HoleController"}}}).state("tab.round-detail-shortgame",{url:"/round-detail-shortgame",params:{id:0,hole:0},views:{rounds:{templateUrl:"src/rounds/shortgame.html",controller:"HoleController"}}}).state("tab.stats",{url:"/stats",views:{stats:{templateUrl:"src/stats/stats.html",controller:"StatsController"}}}).state("tab.stats.overall",{url:"/overall",views:{"stats-detail":{templateUrl:"src/stats/overall.html"}}}).state("tab.stats.teeball",{url:"/teeball",views:{"stats-detail":{templateUrl:"src/stats/teeball.html"}}}).state("tab.stats.approach",{url:"/approach",views:{"stats-detail":{templateUrl:"src/stats/approach.html"}}}).state("tab.stats.shortgame",{url:"/shortgame",views:{"stats-detail":{templateUrl:"src/stats/shortgame.html"}}}),e.otherwise("/login")}]),statracker.factory("localStore",["store",function(t){return t.getNamespacedStore("stk")}]),function(t){var e,o,n;e=function(t){this.key=t.key,this.hole=t.holeNumber,this.clubKey=t.clubKey,this.yardage=t.yardageNumber,this.result=t.resultId,this.coordinates={x:t.resultXNumber,y:t.resultYNumber}},o=function(){return{key:this.key,holeNumber:this.hole,clubKey:this.clubKey,yardageNumber:this.yardage,resultId:this.result,resultXNumber:this.coordinates.x,resultYNumber:this.coordinates.y}},n=function(t){this.key=void 0,this.hole=t,this.clubKey=void 0,this.yardage=void 0,this.result=void 0,this.coordinates=void 0},n.prototype={constructor:n,importShot:e,exportShot:o},t.ApproachShot=n}(statracker),statracker.controller("CreateRoundController",["$scope","$state","userData","roundService",function(t,e,o,n){var r=this;r.round={date:new Date,holes:18,course:{key:0,courseDescription:""},hasError:!1,error:""},r.canStart=function(){return!0},r.startRound=function(){var t=n.create(r.round.course,r.round.date,r.round.holes);n.update(t,!0).then(function(t){e.go("^.round-detail-teeball({id: "+t.key+", hole: 1})")})},t.$on("new-course",function(t,e){o.addCourse(e).then(function(t){t&&(r.round.course.key=t.key)})})}]),statracker.controller("HoleController",["$scope","$state",function(t,e){t.round||(t.round={}),t.round.id=e.params.id,t.hole||(t.hole={}),t.hole.number=e.params.hole,t.gotoSummary=function(){var t=e.params;t.hole=void 0,e.go("^.round-summary",t)}}]),statracker.controller("ListRoundsController",["roundService",function(t){var e=this;e.rounds=[],t.getAll().then(function(t){e.rounds=t.data})}]),statracker.directive("navNext",["$state","$ionicGesture","$ionicViewSwitcher",function(t,e,o){return{restrict:"A",link:function(n,r,s){var a=s.navNext;e.on("swipe",function(e){"left"===e.gesture.direction&&(e.preventDefault(),o.nextDirection("forward"),t.is("tab.round-detail-shortgame")&&(o.nextDirection("swap"),void 0!==t.params.hole&&3==t.params.hole?t.params.hole=1:t.params.hole+=1),t.go(a,t.params,{location:"replace"}))},r)}}}]),statracker.directive("navPrev",["$state","$ionicGesture","$ionicViewSwitcher",function(t,e,o){return{restrict:"A",link:function(n,r,s){var a=s.navPrev;e.on("swipe",function(e){"right"===e.gesture.direction&&(e.preventDefault(),o.nextDirection("back"),t.is("tab.round-detail-teeball")&&(o.nextDirection("swap"),void 0!==t.params.hole&&1==t.params.hole?t.params.hole=3:t.params.hole-=1),t.go(a,t.params,{location:"replace"}))},r)}}}]),statracker.controller("RoundController",["$scope","$state",function(t,e){t.round||(t.round={}),t.round.id=e.params.id,t.gotoDetails=function(){var t=e.params;t.hole=1,e.go("^.round-detail-teeball",t)}}]),statracker.factory("roundService",["$http","$q","localStore","apiUrl",function(t,e,o,n){var r,s=function(){return r?r:r=o.get("round")},a=function(s){var a=e.defer();return t.get(n+"/api/rounds/"+s).then(function(t){r=statracker.Round.import(t.data),o.set("round",r),a.resolve(r)}),a.promise},i=function(){return t.get(n+"/api/rounds")},l=function(t,e,n){return r=new statracker.Round(t,e,n),o.set("round",r),r},u=function(s,a){var i=e.defer();if(r=s,a){var l=statracker.Round.export(s);r.key&&r.key>0?t.put(n+"/api/rounds/"+r.key,l).then(function(){o.set("round",r),i.resolve(r)}):t.post(n+"/api/rounds",l).then(function(t){r.key=t.data.id,o.set("round",r),i.resolve(r)})}else o.set("round",r),i.resolve(r);return i.promise},c=function(t){u(t),o.remove("round")},d=function(e){t.delete(n+"/api/rounds/"+e).then(function(){r&&r.key===e&&(r=void 0,o.remove("round"))})};return{getCurrent:s,getOne:a,getAll:i,create:l,update:u,complete:c,"delete":d}}]),function(t){var e,o,n;e=function(e){this.key=e.key,this.datePlayed=e.roundDate,this.courseKey=e.courseKey,this.holes=e.holesCount,this.score=e.scoreNumber,this.greens=e.greensNumber,this.fairways=e.fairwaysNumber,this.penalties=e.penaltiesNumber,this.sandSaveAttempts=e.sandSaveAttemptsNumber,this.sandSaveConversions=e.sandSaveConvertedNumber,this.upAndDownAttempts=e.upAndDownAttemptsNumber,this.upAndDownConversions=e.upAndDownConvertedNumber;var o;for(o=0;o<e.holesCount;o++)this.teeShots.push(t.TeeShot.importShot(e.teeShots[o])),this.approachShots.push(t.ApproachShot.importShot(e.approachShots[o])),this.shortGameShots.push(t.ShortGame.importShots(e.shortGameShots[o]))},o=function(){var e,o={key:this.key,roundDate:this.datePlayed,courseKey:this.courseKey,holesCount:this.holes,scoreNumber:this.score,greensNumber:this.greens,fairwaysNumber:this.fairways,penaltiesNumber:this.penalties,sandSaveAttemptsNumber:this.sandSaveAttempts,sandSaveConvertedNumber:this.sandSaveConversions,upAndDownAttemptsNumber:this.upAndDownAttempts,upAndDownConvertedNumber:this.upAndDownConversions,teeShots:[],approachShots:[],shortGameShots:[]};for(e=0;e<this.holes;e++)o.teeShots.push(t.TeeShot.exportShot(this.teeShots[e])),o.approachShots.push(t.ApproachShot.exportShot(this.approachShots[e])),o.shortGameShots.push(t.ShortGame.exportShots(this.shortGameShots[e]))},n=function(e,o,n){this.key=void 0,this.courseKey=e.key,this.courseName=e.description,this.datePlayed=o,this.holes=n,this.score=void 0,this.greens=void 0,this.fairways=void 0,this.penalties=void 0,this.sandSaveAttempts=void 0,this.sandSaveConversions=void 0,this.upAndDownAttempts=void 0,this.upAndDownConversions=void 0,this.teeShots=[],this.approachShots=[],this.shortGameShots=[];var r;for(r=1;n>=r;r++)this.teeShots.push(new t.TeeShot(r)),this.approachShots.push(new t.ApproachShot(r)),this.shortGameShots.push(new t.ShortGame(r))},n.prototype={constructor:n,"import":e,"export":o},t.Round=n}(statracker),function(t){var e,o,n;e=function(t){this.key=t.key,this.hole=t.holeNumber,this.initialPuttLength=t.initialLengthNumber,this.puttMadeLength=t.finalLengthNumber,this.putts=t.puttsCount,this.upAndDown=t.upAndDownFlag,this.sandSave=t.sandSaveFlag,this.holeOut=t.holeOutFlag},o=function(){return{key:this.key,holeNumber:this.hole,initialLengthNumber:this.initialPuttLength,finalLengthNumber:this.puttMadeLength,puttsCount:this.putts,upAndDownFlag:this.upAndDown,sandSaveFlag:this.sandSave,holeOutFlag:this.holeOut}},n=function(t){this.key=void 0,this.hole=t,this.initialPuttLength=void 0,this.puttMadeLength=void 0,this.putts=void 0,this.upAndDown=void 0,this.sandSave=void 0,this.holeOut=void 0},n.prototype={constructor:n,importShots:e,exportShots:o},t.ShortGame=n}(statracker),function(t){var e,o,n;e=function(t){this.key=t.key,this.hole=t.holeNumber,this.clubKey=t.clubKey,this.distance=t.distanceNumber,this.result=t.resultId,this.coordinates={x:t.resultXNumber,y:t.resultYNumber}},o=function(){return{key:this.key,holeNumber:this.hole,clubKey:this.clubKey,distanceNumber:this.distance,resultId:this.result,resultXNumber:this.coordinates.x,resultYNumber:this.coordinates.y}},n=function(t){this.key=void 0,this.hole=t,this.clubKey=void 0,this.distance=void 0,this.result=void 0,this.coordinates=void 0},n.prototype={constructor:n,importShot:e,exportShot:o},t.TeeShot=n}(statracker),statracker.controller("StatsController",["$scope","$state",function(t){t.is("tab.stats")&&t.go(".overall")}]);